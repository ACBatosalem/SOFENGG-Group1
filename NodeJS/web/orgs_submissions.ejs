<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
		<title> <%=user.org.username%> | Submissions </title>
		<link rel="icon" type="image/gif" href="<%=context%>/resources/logo.png" />
        
		<!-- LIBRARIES -->
		<script> 
			var username = "<%=user.username%>";
			var context = "<%=context%>"; 
		</script>
        <script src="https://www.gstatic.com/firebasejs/4.6.2/firebase.js"></script>
        <script src="https://www.gstatic.com/firebasejs/4.6.2/firebase-app.js"></script>
        <script src="https://www.gstatic.com/firebasejs/4.6.2/firebase-database.js"></script>
        <script>
            var config = {
                apiKey: "AIzaSyBL3mFq5IA-6wlKsvxJCmeRvEuCrC8tp-k",
                authDomain: "labfirebase-f292b.firebaseapp.com",
                databaseURL: "https://labfirebase-f292b.firebaseio.com",
                projectId: "labfirebase-f292b",
                storageBucket: "labfirebase-f292b.appspot.com",
                messagingSenderId: "783008488555"
            };
            firebase.initializeApp(config);
        </script>
        <script src="<%=context%>/libraries/jquery/jquery-3.2.1.js" type="application/javascript"> </script>
        <script src="<%=context%>/libraries/datatables/datatables.js" type="application/javascript"> </script>
        <link type="text/css" href="<%=context%>/libraries/datatables/datatables.css" rel="stylesheet">
      	<link type="text/css" href="<%=context%>/libraries/font-awesome-4.7.0/css/font-awesome.min.css" rel=stylesheet>
        
        <!-- SCRIPTS -->
        <script src="<%=context%>/scripts/dashboard.js" type="application/javascript"> </script>
        <script src="<%=context%>/scripts/logout.js" type="application/javascript"> </script>
        <script src="<%=context%>/scripts/notification.js" type="application/javascript"> </script>
        <script src="<%=context%>/scripts/modal.js" type="application/javascript"> </script>
        
        <!-- STYLES -->
        <link type="text/css" href="<%=context%>/styles/modal.css" rel=stylesheet>
        <link type="text/css" href="<%=context%>/styles/content.css" rel="stylesheet">
        <link type="text/css" href="<%=context%>/styles/navigation.css" rel="stylesheet">
        <link type="text/css" href="<%=context%>/styles/table-styles.css" rel ="stylesheet">
        <link type="text/css" href="<%=context%>/styles/dashboard-style.css" rel="stylesheet">
	</head>
    <body>
        <!-- BACKGROUNDS AND OVERLAYS -->
        <div id="main-bg"></div>
        <div id="main_overlay"></div>
        
        <!-- MODAL VIEW START -->
        <div id = "modal-view" tabindex="1">
            <!-- MODAL BACKGROUND -->
            <div id = "modal-bg"> </div>
            <!-- MODAL CONTENT START -->
            <div id = "modal-container-outer">
                <button id = "modal-close"> </button>
                
                <div id = "modal-container">
                    <div id = "modal-content">
                        <div class = "half">
                            <label class = "modal-label modal-division"> 
                                <button data-form = "details" class = "selected"> DETAILS </button>
                                <button data-form = "submission"> SUBMISSION </button>
                            </label> 
                            <section id = "details">
                                <div class = "modal-row">
                                    <label class = "modal-label"> Title </label> 
                                    <input id = "act-name" class="field" type="text"> 
                                </div>
                                <div class = "modal-row">
                                    <label class = "modal-label"> Organization </label>	
                                    <input id = "org-name" class="field" type="text">
                                </div>
                                
                                <div class = "modal-row">
                                    <label class = "modal-label"> Date/s: </label> 
                                    <textarea id = "actDate" class="field" > </textarea> 
                                </div>
                                <div class = "modal-row">
                                    <label class = "modal-label"> Time: </label>
                                    <input id = "time" class="field" type="text"> 
                                </div>
                                <div class = "modal-row">
                                    <label class = "modal-label"> Venue: </label> 
                                    <input id = "venue" class="field" type="text"> 
                                </div>
                                <div class = "modal-row">
                                    <label class = "modal-label"> Nature: </label> 
                                    <input id = "nature" class="field" type="text"> 
                                </div> 

                                <div class = "modal-row">
                                    <label class = "modal-label"> Type: </label> 
                                    <input id = "type" class="field" type="text"> 
                                </div>    
                            </section>
                            <section id = "submission">
                                <div class = "modal-row">
                                    <label class = "modal-label"> Submission Type: </label>
                                    <input id = "submissionType" class="field" type="text"> 
                                </div> 
                                <div class = "modal-row">
                                    <label class = "modal-label"> Submitted By: </label>
                                    <input id = "submittedBy" class="field" type="text"> 
                                </div>
                                <div class = "modal-row">
                                    <label class = "modal-label"> Date Submitted: </label> 
                                    <input id = "submitDate" class="field" type="text"> 
                                </div>  
                                <div class = "modal-row">
                                    <label class = "modal-label"> Type of SAS Submission: </label> 
                                    <input id = "typeSAS" class="field" type="text"> 
                                </div>  
                            </section>
                        </div>
                            
                        <section id = "checker">
                            <label class = "modal-label modal-division"> CHECKER </label> <br>
                            <div class = "modal-row">
                                <label class = "modal-label"> Checked by: </label> 
                                <input disabled id = "checkedBy" class="field" type="text"> 
                            </div> 
                            <div class = "modal-row">
                                <label class = "modal-label"> Date Checked: </label>
                                <input disabled id = "dateChecked" class="field" type="text"> 
                            </div> 
                            <div class = "modal-row">
                                <label class = "modal-label"> Remarks: </label>
                                <textarea disabled id = "remarks" class="field" type="text"> </textarea>
                            </div>
                             <div class = "modal-row">
                                <label class = "modal-label"> Status: </label>
                                 <select disabled class = "field" id = "status"> 
                                    <option value selected disabled > No status yet </option>
                                    <option class = "early_approved" value="EARLY APPROVED"> EARLY APPROVED </option>
                                    <option class = "late_approved"value="LATE APPROVED"> LATE APPROVED </option>
                                    <option class = "pending"value="PENDING"> PENDING </option>
                                    <option class = "denied"value="DENIED"> DENIED </option>
                                 </select>
                            </div>
                            <button class = "btn check-resubmit-edit" id = "resubmit">
                                <i class = "fa fa-check"> </i>
                                RESUBMIT
                            </button>
                        </section>
                    </div>
                </div>
            </div>
            <!-- MODAL CONTENT END -->
        </div>
        <!-- MODAL VIEW END -->
	        
        <!-- MAIN VIEW START -->
        <div id="main">
            <!-- SIDE BAR NAVIGATION START -->
	        <nav id="nav">
	            <!-- TOP ITEMS -->
	            <div id="top_div">
	                <!-- HEADER OVERLAY -->
	                <div class = "label-header-overlay"> </div>
	                <!-- HEADER IMAGE -->
	                <div class = "label-header"> </div>
	            
	                <!-- HEADER CONTENT START -->
	                <div id="header">
	                    <!-- LOGIN ICON HOLDER -->
	                    <div class = "icon-holder"> </div>
	                    <!-- DLSU LOGO -->
	                    <img id = "dlsu-logo" src="<%=context%>/resources/logo.png">
	                    <!-- ICON HOLDER OVERLAY -->
	                    <div class = "icon-holder-overlay"> </div>
	                </div>
	                
	                <!-- WELCOME MESSAGE -->
	                <p class="nav label"> Welcome <%=user.name%> </p>
	                <!-- SUBMISSIONS BUTTON LINK START -->
	                <a class = "nav-link" href="<%=context%>"> 
	                 <button id="submissions" class="nav-item nav-button selected"> 
	                         Submissions
	                		<div class = "triangle"> </div>
	                 </button>
	                </a>
	                <!-- SUBMISSIONS BUTTON LINK END -->
	                <!-- STATISTICS BUTTON LINK START -->
	                <a class = "nav-link" href="<%=context%>/org/statistics"> 
	                	<button class = "nav-item nav-button"> 
	                        Statistics
	                    <div class = "triangle"> </div>
	                	</button>
	                </a>
	                <!-- STATISTICS BUTTON LINK END -->
	            </div>
	            <!-- BOTTOM ITEMS START -->
	            <div id="bottom_div">
	                <!-- ACCOUNT SETTINGS BUTTON -->
	                <a class = "nav-link" href="<%=context%>/org/profile">
	                 <button id="change_pw" class="nav-item nav-button"> 
	                         Account Settings
	                     <div class = "triangle"> </div>
	                 </button>
	                </a>
	                <!-- SIGN OUT BUTTON -->
	                <a class = "nav-link">
	                 <button id="signout" class="nav-item nav-button">   
	                         Logout	                       
	                 </button>
	                </a>
	            </div>
	            <!-- BOTTOM ITEMS END -->
	        </nav>
	        <!-- SIDE BAR NAVIGATION END -->
            
           <!-- MAIN CONTENT START -->
            <div id="main_content">
                <!-- MAIN HEADER START -->
                <div id="main_header">
                    <!-- MAIN HEADER TITLE -->
                    <h1 class="body_label head"> Submissions </h1>
                </div>
                <!-- MAIN HEADER END -->
                <!-- MAIN BODY START -->
                <button class = "submit btn"> 
                    <a  class = "link" href="<%=context%>/org/newSubmission">
                        <i class = "fa fa-plus"> </i>
                        New Submission 
                    </a>
                </button>
                <div id="main_body">
                    <div id = "table-container">
                        <!-- TABLE SUBMISSIONS START -->
                         <table id="table_submissions">
                            <thead>
                                <!-- HEADER: TIME STAMP, ORG NAME, TITLE, DATE, STATUS -->
                                <tr class = "header"> 
                                    <th class = "header timestamp"> Timestamp </th>
                                    <th class = "header org"> Organization </th>
                                    <th class = "header title"> Title </th>
                                    <th class = "header status"> Status </th>
                                </tr>
                            </thead>

                            <!-- DATA: SUBMISSIONS -->    
                            <tbody>
                            <% for (key in submissions) { %> 
                                <tr data-docuID = "<%=key%>" >
	                                <td> <%= submissions[key].timestamp %> </td>
                                    <td> <%= submissions[key].submittedBy.org.name%> </td>
	                                <td> <%= submissions[key].title %>  </td>
                                    
		                            <% switch (submissions[key].status) { 
                                            case "EARLY APPROVED": %>
                                            <td class = "early_approved"> <%=submissions[key].status%> </td>
                                        <%  break;
                                            case "LATE APPROVED": %>
                                            <td class = "late_approved"> <%=submissions[key].status%> </td>
                                        <%  break;
                                            case "PENDING": %>
                                            <td class = "pending"> <%=submissions[key].status%> </td>
                                        <%  break;
                                            case "DENIED": %>
                                            <td class = "denied"> <%=submissions[key].status%> </td>
                                        
                                        <%  break;
                                            case "-":
                                            case "":
                                            case null: %>
                                            <td> TO BE CHECKED </td>
                                        <%  break;
                                            default: %>
                                            <td> <%=submissions[key].status%> </td>
	                                <% } %>
	                            </tr>
                            <% } %>
                            </tbody>
                            <tfoot>

                            </tfoot>
                        </table> 
                    </div>
                    <!-- TABLE SUBMISSION LIST -->
                </div>
                <!-- MAIN BODY END -->
            </div>
            <!-- MAIN CONTENT END -->
            
			<!-- NOTIFICATIONS START -->
            <div id = "notifications">
                <div class = "notif-container">
                    <div id = "notif-btn">
                        <i class = "fa fa-bell-o notif_icon"> </i>
                    </div>
                    <div class = "badge1" data-badge="15" id = "notif-count"> </div>
                    <div class = "notif-label"> NOTIFICATIONS </div>  
                    <div id = "notif-clear">
                        
                        <i class = "fa fa-inbox"> </i>
                    </div>
                </div>
                <ol id = "notifs-list">

                </ol>
            </div>
            <!-- NOTIFICATIONS END -->
        </div>
        <!-- MAIN VIEW END -->
    </body>
</html>